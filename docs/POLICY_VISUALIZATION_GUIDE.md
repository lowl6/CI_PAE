# 1. åˆ é™¤æ•´ä¸ªæ•°æ®åº“
mysql -u root -p -e "DROP DATABASE IF EXISTS ci_pae;"# æ”¿ç­–å¯è§†åŒ–ç³»ç»Ÿå®ç°æ€»ç»“

åˆ é™¤åé‡å¯åç«¯å³å¯
## ğŸ“‹ ç³»ç»Ÿæ¦‚è¿°

æ”¿ç­–å¯è§†åŒ–ç³»ç»Ÿæ˜¯ CI-PAE é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼Œæä¾›åŸºäº D3.js åŠ›å¯¼å‘å¸ƒå±€çš„æ”¿ç­–æ°”æ³¡å¯è§†åŒ–ï¼Œå¹¶**æ·±åº¦é›†æˆå£è¿°å²ï¼ˆè®¿è°ˆï¼‰æ•°æ®ä½“ç³»**ï¼Œå®ç°å¤šç»´åˆ†æä¸å…³è”æ´å¯Ÿã€‚

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

1. **æ”¿ç­–æ°”æ³¡å¯è§†åŒ–**
   - åŸºäº D3.js force-directed layout çš„åŠ¨æ€æ°”æ³¡å›¾
   - æ°”æ³¡å¤§å°åæ˜ æ”¿ç­–è¦†ç›–å¿æ•°ï¼ˆcounty_countï¼‰
   - é¢œè‰²åŒºåˆ†æ”¿ç­–ç±»å‹ï¼ˆäº§ä¸šæ‰¶è´«ã€å¥åº·æ‰¶è´«ã€æ•™è‚²æ‰¶è´«ç­‰ï¼‰
   - æ”¯æŒæ‹–æ‹½ã€ç¼©æ”¾ã€hover tooltip äº¤äº’

2. **æ”¿ç­–æ•ˆæœé‡åŒ–**
   - **å…³è”å¼ºåº¦ï¼ˆstrengthï¼‰**ï¼šåŸºäº 4 ç»´åº¦æŒ‡æ ‡ï¼ˆç»æµã€å†œä¸šã€åŸºå»ºã€ç¤¾ä¿ï¼‰å¯¹æ¯”å‰åæ•°æ®ï¼Œé‡åŒ–æ”¿ç­–å®æ–½æ•ˆæœï¼ˆ0.20-0.95ï¼‰
   - **èµ„æºæŠ•å…¥ç»Ÿè®¡**ï¼šè®°å½•æ”¿ç­–æŠ•å…¥èµ„é‡‘ã€å—ç›Šäººæ•°ã€èµ„æºç±»å‹
   - **æ—¶é—´è·¨åº¦åˆ†æ**ï¼šè¿½è¸ªæ”¿ç­–é‡‡çº³å¹´ä»½èŒƒå›´ï¼ˆfirst_adopt_year - last_adopt_yearï¼‰

3. **å£è¿°å²æ•°æ®é›†æˆ**ï¼ˆâ­ v1.2.0 æ ¸å¿ƒç‰¹æ€§ï¼‰
   - **6 å¼ æ ¸å¿ƒè¡¨**ï¼š`interviewees`ï¼ˆå—è®¿è€…ï¼‰ã€`interview_events`ï¼ˆè®¿è°ˆäº‹ä»¶ï¼‰ã€`interview_data`ï¼ˆè®¿è°ˆå†…å®¹ï¼‰ã€`researchers`ï¼ˆè°ƒç ”è€…ï¼‰ã€2 å¼ å…³è”è¡¨
   - **æ™ºèƒ½å…³è”æœºåˆ¶**ï¼š
     - é€šè¿‡ `policy_keywords` è¡¨è‡ªåŠ¨åŒ¹é…è®¿è°ˆå†…å®¹ä¸­çš„æ”¿ç­–å…³é”®è¯
     - åŸºäºå¿åŸŸï¼ˆcounty_idï¼‰å…³è”æ”¿ç­–å®æ–½åœ°ä¸è®¿è°ˆå‘ç”Ÿåœ°
     - ç”Ÿæˆ `policy_interview_cache` ç¼“å­˜è¡¨ï¼Œé¢„è®¡ç®—ç›¸å…³åº¦è¯„åˆ†ï¼ˆ0-10 åˆ†ï¼‰
   - **è®¿è°ˆæ•°æ®å±•ç¤º**ï¼š
     - æ”¿ç­–è¯¦æƒ…é¡µæ˜¾ç¤ºå…³è”è®¿è°ˆåˆ—è¡¨ï¼ˆæŒ‰ç›¸å…³åº¦æ’åºï¼‰
     - è®¿è°ˆå¡ç‰‡å±•ç¤ºå—è®¿è€…èº«ä»½ã€å¿åŸŸã€å…³é”®è¯ã€ç»éªŒæ€»ç»“
     - ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹å®Œæ•´å£è¿°å†…å®¹ï¼ˆå«è°ƒç ”è€…ã€è®¿è°ˆæ—¶é—´åœ°ç‚¹ï¼‰

4. **å¤šç»´ç­›é€‰ä¸ç»Ÿè®¡**
   - æŒ‰æ”¿ç­–ç±»å‹ã€åŸå¸‚ã€å¹´ä»½ã€å…³é”®è¯ç­›é€‰
   - èšåˆç»Ÿè®¡ï¼ˆç±»å‹åˆ†å¸ƒã€å¹´ä»½åˆ†å¸ƒã€è¦†ç›–åº¦æ’åï¼‰
   - æ”¯æŒåˆ†é¡µä¸å®æ—¶æœç´¢

### ğŸ”— ç³»ç»Ÿé›†æˆæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯ç”¨æˆ·ç•Œé¢                              â”‚
â”‚  (Patterns.vue + PolicyDetailDrawer.vue + InterviewCard)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ API è°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åç«¯æœåŠ¡å±‚                                â”‚
â”‚  policyService.js (getPolicyDetail / getInterviewFullContent)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ SQL æŸ¥è¯¢
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®åº“å±‚                                  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ æ”¿ç­–ç³»ç»Ÿè¡¨     â”‚          â”‚ å£è¿°å²ç³»ç»Ÿè¡¨   â”‚            â”‚
â”‚  â”‚ â€¢ policies     â”‚â—„â”€â”€â”€â”€â”€â”   â”‚ â€¢ interviewees â”‚            â”‚
â”‚  â”‚ â€¢ rel_policy_  â”‚      â”‚   â”‚ â€¢ interview_   â”‚            â”‚
â”‚  â”‚   county       â”‚      â”‚   â”‚   events       â”‚            â”‚
â”‚  â”‚ â€¢ policy_      â”‚      â”‚   â”‚ â€¢ interview_   â”‚            â”‚
â”‚  â”‚   resources    â”‚      â”‚   â”‚   data         â”‚            â”‚
â”‚  â”‚ â€¢ policy_      â”‚      â”‚   â”‚ â€¢ researchers  â”‚            â”‚
â”‚  â”‚   keywords     â”‚      â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚                                  â”‚
â”‚                          â”‚                                  â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                  â”‚ policy_interview â”‚ [å…³é”®æ¡¥æ¥è¡¨]          â”‚
â”‚                  â”‚      _cache      â”‚ â€¢ å…³é”®è¯åŒ¹é…           â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â€¢ å¿åŸŸå…³è”           â”‚
â”‚                                       â€¢ ç›¸å…³åº¦è¯„åˆ†          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ æ•°æ®åº“å±‚

### ğŸ“Š æ•°æ®æ¨¡å‹æ€»è§ˆï¼ˆæ”¿ç­–+å£è¿°å²é›†æˆæ¶æ„ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ”¿ç­–å¯è§†åŒ–æ•°æ®æ¨¡å‹                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       policies              â”‚      â”‚       counties              â”‚
â”‚  (æ”¿ç­–ä¸»è¡¨)                 â”‚      â”‚  (å¿åŸŸä¿¡æ¯è¡¨)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK policy_id                â”‚      â”‚ PK county_id                â”‚
â”‚    policy_name              â”‚      â”‚    county_name              â”‚
â”‚    policy_type              â”‚      â”‚    province / city          â”‚
â”‚    department               â”‚      â”‚    is_poverty_alleviated    â”‚
â”‚    issue_date               â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚    summary                  â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
         â”‚                                      â”‚
         â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                           â”‚                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  rel_policy_county          â”‚â—„â”€â”€â”€â”€â”€â”˜      â”‚  economic_indicators         â”‚
â”‚  (æ”¿ç­–-å¿å…³è”è¡¨)            â”‚             â”‚  agriculture_indicators      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚  infrastructure_indicators   â”‚
â”‚ PK policy_id, county_id     â”‚             â”‚  medical_social_indicators   â”‚
â”‚ â­ strength (0.20-0.95)     â”‚             â”‚  (8ç±»æŒ‡æ ‡è¡¨ï¼Œç”¨äºè®¡ç®—å¼ºåº¦)  â”‚
â”‚    adopt_year               â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚    notes                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  policy_keywords            â”‚      â”‚  policy_resources           â”‚
â”‚  (æ”¿ç­–å…³é”®è¯è¡¨)             â”‚      â”‚  (æ”¿ç­–èµ„æºæŠ•å…¥è¡¨)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK policy_id, keyword       â”‚      â”‚ PK resource_id              â”‚
â”‚    weight (å…³é”®è¯æƒé‡)      â”‚      â”‚ FK policy_id                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚    category / amount        â”‚
         â”‚                           â”‚    beneficiary_count        â”‚
         â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                           â”‚  interview_events           â”‚
         â”‚                           â”‚  (è®¿è°ˆäº‹ä»¶è¡¨)               â”‚
         â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                           â”‚ PK event_id                 â”‚
         â”‚                           â”‚    location / event_date    â”‚
         â”‚                           â”‚    topic                    â”‚
         â”‚                           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                  â”‚
         â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                           â”‚  interview_data             â”‚
         â”‚                           â”‚  (è®¿è°ˆå†…å®¹è¡¨)               â”‚
         â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                           â”‚ PK data_id                  â”‚
         â”‚                           â”‚ FK event_id                 â”‚
         â”‚                           â”‚    content (LONGTEXT)       â”‚
         â”‚                           â”‚    keywords (æå–çš„å…³é”®è¯)  â”‚
         â”‚                           â”‚    experience_summary       â”‚
         â”‚                           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                  â”‚
         â”‚                                  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  policy_interview_cache        â”‚
         â”‚  (æ”¿ç­–-è®¿è°ˆå…³è”ç¼“å­˜è¡¨) ğŸ”—     â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚ PK policy_id, data_id          â”‚
         â”‚ FK county_id                   â”‚
         â”‚ â­ relevance_score (0-10)      â”‚
         â”‚    matched_keywords            â”‚
         â”‚    updated_at                  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–²                     â–²
              â”‚                     â”‚
    é€šè¿‡å…³é”®è¯åŒ¹é…è‡ªåŠ¨ç”Ÿæˆ          é€šè¿‡å¿åŸŸå…³è”
    (keywords + content)            (interviewees.county_id)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  interviewees               â”‚      â”‚  researchers                â”‚
â”‚  (å—è®¿è€…è¡¨)                 â”‚      â”‚  (è°ƒç ”è€…è¡¨)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK interviewee_id           â”‚      â”‚ PK researcher_id            â”‚
â”‚ FK county_id (å…³è”å¿åŸŸ)     â”‚      â”‚    name / unit / role       â”‚
â”‚    name / unit / identity   â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
         â”‚                                      â”‚
         â”‚                                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  rel_interviewee_event      â”‚      â”‚  rel_data_researcher        â”‚
â”‚  (å—è®¿è€…-äº‹ä»¶å…³è”)          â”‚      â”‚  (æ•°æ®-è°ƒç ”è€…å…³è”)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK interviewee_id, event_id â”‚      â”‚ PK data_id, researcher_id   â”‚
â”‚    role (å‚ä¸è§’è‰²)          â”‚      â”‚    collection_role          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        v_policy_stats (è§†å›¾)                         â”‚
â”‚   èšåˆè§†å›¾ï¼šä¸€ç«™å¼æŸ¥è¯¢æ”¿ç­–+å¿æ•°+èµ„æº+è®¿è°ˆ+å¼ºåº¦                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ county_count: è¦†ç›–å¿æ•° (COUNT from rel_policy_county)             â”‚
â”‚ â€¢ resource_count: èµ„æºæŠ•å…¥é¡¹ (COUNT from policy_resources)          â”‚
â”‚ â€¢ interview_count: å…³è”è®¿è°ˆæ•° (COUNT from policy_interview_cache)   â”‚
â”‚ â€¢ avg_strength: å¹³å‡å…³è”å¼ºåº¦ (AVG from rel_policy_county.strength)  â”‚
â”‚ â€¢ first_adopt_year / last_adopt_year: é‡‡çº³å¹´ä»½èŒƒå›´                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€å›¾ä¾‹è¯´æ˜ã€‘
â­ = å…³é”®è®¡ç®—å­—æ®µï¼ˆstrengthé€šè¿‡4ç»´åº¦æŒ‡æ ‡è®¡ç®—ï¼Œrelevance_scoreé€šè¿‡å…³é”®è¯åŒ¹é…è®¡ç®—ï¼‰
ğŸ”— = æ ¸å¿ƒæ¡¥æ¥è¡¨ï¼ˆè¿æ¥æ”¿ç­–ç³»ç»Ÿä¸å£è¿°å²ç³»ç»Ÿï¼‰
FK = å¤–é”®å…³è”
PK = ä¸»é”®
```

**æ¶æ„ç‰¹ç‚¹**ï¼š
1. **åŒç³»ç»Ÿé›†æˆ**ï¼šæ”¿ç­–ç®¡ç†ç³»ç»Ÿ + å£è¿°å²é‡‡é›†ç³»ç»Ÿé€šè¿‡ `policy_interview_cache` æ— ç¼é›†æˆ
2. **æ€§èƒ½ä¼˜åŒ–è®¾è®¡**ï¼š
   - ä½¿ç”¨ `policy_interview_cache` ç¼“å­˜å¤æ‚JOINç»“æœ
   - è§†å›¾ `v_policy_stats` ä½¿ç”¨å­æŸ¥è¯¢é¿å…ç¬›å¡å°”ç§¯
3. **æ•°æ®æº¯æºå®Œæ•´**ï¼šè®¿è°ˆ â†’ äº‹ä»¶ â†’ å—è®¿è€… â†’ è°ƒç ”è€…ï¼Œæ”¯æŒå®Œæ•´è¿½æº¯
4. **æ™ºèƒ½å…³è”**ï¼šåŸºäºåœ°åŸŸ(county_id) + å…³é”®è¯åŒ¹é…è‡ªåŠ¨ç”Ÿæˆæ”¿ç­–-è®¿è°ˆå…³è”

---

### 1. è‡ªåŠ¨è¿ç§»ä¸ç»“æ„å¢å¼ºï¼ˆv1.2.0 æ›´æ–°ï¼‰
**è¿ç§»ç›®å½•**: `backend/database/migrations/`

åˆå§‹åŒ–å…¥å£ `initDb.js` å·²åœ¨ç¬¬ä¸‰æ­¥è‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰è¿ç§»è„šæœ¬ï¼š
1. åˆ›å»º/æ£€æŸ¥åŸºç¡€åº“ä¸è¡¨ç»“æ„ï¼ˆ`init.sql`ï¼‰
2. å¯¼å…¥åˆå§‹æ•°æ®ï¼ˆ`data_all/real` ä¸ `data_all/fake`ï¼‰
3. è‡ªåŠ¨éå†æ‰§è¡Œ `migrations` ä¸‹æ‰€æœ‰ `.sql` æŒ‰æ–‡ä»¶åæ’åºï¼ˆå¹‚ç­‰ï¼šå·²å­˜åœ¨/é‡å¤é”®è·³è¿‡ï¼‰

#### æ ¸å¿ƒè¿ç§»è„šæœ¬ï¼š`add_policy_enhancements.sql`

**æ•°æ®åº“æ”¹åŠ¨è¯¦è§£ï¼š**

##### A. è¡¨ç»“æ„å¢å¼º

1. **`rel_policy_county` è¡¨æ‰©å±•**ï¼ˆæ”¿ç­–-å¿å…³è”è¡¨ï¼‰
   ```sql
   ALTER TABLE rel_policy_county ADD COLUMN strength DECIMAL(3,2) DEFAULT 1.0;
   ALTER TABLE rel_policy_county ADD COLUMN adopt_year INT DEFAULT NULL;
   ALTER TABLE rel_policy_county ADD COLUMN notes TEXT DEFAULT NULL;
   ```
   
   **å­—æ®µè¯´æ˜**ï¼š
   - `strength`: **æ”¿ç­–æ•ˆæœå¼ºåº¦** (DECIMAL 0.20-0.95)
     - **æ ¸å¿ƒæŒ‡æ ‡**ï¼šåæ˜ æ”¿ç­–åœ¨è¯¥å¿çš„å®æ–½æ•ˆæœå’Œå½±å“åŠ›
     - **å–å€¼èŒƒå›´**ï¼š0.20ï¼ˆæœ€ä½ï¼‰åˆ° 0.95ï¼ˆæœ€é«˜ï¼‰
     - **è®¡ç®—åŸºç¡€**ï¼šåŸºäºçœŸå®æŒ‡æ ‡æ•°æ®çš„å‰åå¯¹æ¯”
   - `adopt_year`: è¯¥å¿é‡‡çº³æ”¿ç­–çš„å¹´ä»½
   - `notes`: å¤‡æ³¨ä¿¡æ¯

---

### ğŸ”¢ å…³è”å¼ºåº¦ï¼ˆstrengthï¼‰è®¡ç®—è¯¦è§£

#### è®¡ç®—ç†å¿µ
æ”¿ç­–æ•ˆæœå¼ºåº¦é€šè¿‡**4ä¸ªç»´åº¦çš„æŒ‡æ ‡å˜åŒ–**ç»¼åˆè¯„ä¼°ï¼Œå¯¹æ¯”æ”¿ç­–å‘å¸ƒå‰åçš„æ•°æ®å˜åŒ–ç‡ï¼Œåæ˜ æ”¿ç­–çš„å®é™…å½±å“åŠ›ã€‚

#### æ—¶é—´çª—å£è®¾å®š
- **æ”¿ç­–å‘å¸ƒå‰æœŸ**ï¼šå‘å¸ƒå¹´ä»½å‰ 2 å¹´ï¼ˆissue_date - 2 è‡³ issue_date - 1ï¼‰
- **æ”¿ç­–å®æ–½åæœŸ**ï¼šå‘å¸ƒå¹´ä»½å 1-3 å¹´ï¼ˆissue_date + 1 è‡³ issue_date + 3ï¼‰
- **å¯¹æ¯”æ–¹æ³•**ï¼šè®¡ç®—ä¸¤ä¸ªæ—¶æœŸçš„å¹³å‡å€¼ï¼Œè®¡ç®—å¢é•¿ç‡

**ç¤ºä¾‹**ï¼š
- æ”¿ç­–å‘å¸ƒæ—¥æœŸï¼š2018-05-01
- å‰æœŸæ•°æ®ï¼š2016-2017å¹´å¹³å‡å€¼
- åæœŸæ•°æ®ï¼š2019-2021å¹´å¹³å‡å€¼

#### å››ç»´åº¦æƒé‡åˆ†é…

| ç»´åº¦ | æƒé‡ | è¯´æ˜ |
|-----|------|------|
| ç»æµå¢é•¿ | 40% | åæ˜ ç»æµå‘å±•æ•ˆæœ |
| å†œä¸šå‘å±• | 30% | åæ˜ å†œä¸šç”Ÿäº§æ”¹å–„ |
| åŸºç¡€è®¾æ–½ | 20% | åæ˜ åŸºå»ºæ”¹å–„ç¨‹åº¦ |
| ç¤¾ä¼šä¿éšœ | 10% | åæ˜ æ°‘ç”Ÿä¿éšœæå‡ |

#### ç»´åº¦1ï¼šç»æµå¢é•¿ï¼ˆ40%æƒé‡ï¼‰

**æŒ‡æ ‡ç»„æˆ**ï¼š
- **GDPå¢é•¿ç‡**ï¼ˆå ç»æµç»´åº¦50%ï¼‰
  - è®¡ç®—å…¬å¼ï¼š`(åæœŸGDP - å‰æœŸGDP) / å‰æœŸGDP`
  - å½’ä¸€åŒ–æ ‡å‡†ï¼š15%å¢é•¿ç‡ = 1.0æ»¡åˆ†
  - è¯„åˆ†å…¬å¼ï¼š`MIN(1.0, å¢é•¿ç‡ / 0.15)`
  
- **å†œæ‘å±…æ°‘äººå‡å¯æ”¯é…æ”¶å…¥å¢é•¿ç‡**ï¼ˆå ç»æµç»´åº¦50%ï¼‰
  - è®¡ç®—å…¬å¼ï¼š`(åæœŸæ”¶å…¥ - å‰æœŸæ”¶å…¥) / å‰æœŸæ”¶å…¥`
  - å½’ä¸€åŒ–æ ‡å‡†ï¼š10%å¢é•¿ç‡ = 1.0æ»¡åˆ†
  - è¯„åˆ†å…¬å¼ï¼š`MIN(1.0, å¢é•¿ç‡ / 0.10)`

**SQLå®ç°**ï¼š
```sql
-- ç»æµç»´åº¦è´¡çŒ®å€¼ = 0.40 Ã— (GDPå¾—åˆ†Ã—0.5 + æ”¶å…¥å¾—åˆ†Ã—0.5)
0.40 * (
  0.50 * CASE 
    WHEN ei_before.gdp > 0 AND ei_after.gdp > 0 
    THEN LEAST(1.0, (ei_after.gdp - ei_before.gdp) / ei_before.gdp / 0.15)
    ELSE 0.5  -- æ•°æ®ç¼ºå¤±æ—¶ç»™åŸºç¡€åˆ†
  END +
  0.50 * CASE 
    WHEN ei_before.disp_income_rural > 0 AND ei_after.disp_income_rural > 0 
    THEN LEAST(1.0, (ei_after.disp_income_rural - ei_before.disp_income_rural) / ei_before.disp_income_rural / 0.10)
    ELSE 0.5 
  END
)
```

**è¯„åˆ†ç¤ºä¾‹**ï¼š
- å¿Aï¼šGDPå¢é•¿12%ã€æ”¶å…¥å¢é•¿8%
  - GDPå¾—åˆ†ï¼š12% / 15% = 0.80
  - æ”¶å…¥å¾—åˆ†ï¼š8% / 10% = 0.80
  - ç»æµç»´åº¦ï¼š0.40 Ã— (0.80Ã—0.5 + 0.80Ã—0.5) = 0.32
  
- å¿Bï¼šGDPå¢é•¿18%ã€æ”¶å…¥å¢é•¿15%ï¼ˆè¶…è¿‡æ ‡å‡†ï¼‰
  - GDPå¾—åˆ†ï¼šMIN(1.0, 18%/15%) = 1.0ï¼ˆå°é¡¶ï¼‰
  - æ”¶å…¥å¾—åˆ†ï¼šMIN(1.0, 15%/10%) = 1.0ï¼ˆå°é¡¶ï¼‰
  - ç»æµç»´åº¦ï¼š0.40 Ã— (1.0Ã—0.5 + 1.0Ã—0.5) = 0.40ï¼ˆæ»¡åˆ†ï¼‰

#### ç»´åº¦2ï¼šå†œä¸šå‘å±•ï¼ˆ30%æƒé‡ï¼‰

**æŒ‡æ ‡ç»„æˆ**ï¼š
- **ç²®é£Ÿäº§é‡å¢é•¿ç‡**ï¼ˆå å†œä¸šç»´åº¦67%ï¼‰
  - å½’ä¸€åŒ–æ ‡å‡†ï¼š8%å¢é•¿ç‡ = 1.0æ»¡åˆ†
  - è¯„åˆ†å…¬å¼ï¼š`MIN(1.0, å¢é•¿ç‡ / 0.08)`
  
- **è€•åœ°é¢ç§¯å¢é•¿ç‡**ï¼ˆå å†œä¸šç»´åº¦33%ï¼‰
  - å½’ä¸€åŒ–æ ‡å‡†ï¼š5%å¢é•¿ç‡ = 1.0æ»¡åˆ†
  - ç‰¹æ®Šå¤„ç†ï¼šè´Ÿå¢é•¿æ˜ å°„åˆ°0-0.5åŒºé—´ï¼ˆè€•åœ°å‡å°‘æ˜¯å¸¸æ€ï¼‰
  - è¯„åˆ†å…¬å¼ï¼š`MIN(1.0, å¢é•¿ç‡ / 0.05 + 0.5)`

**SQLå®ç°**ï¼š
```sql
-- å†œä¸šç»´åº¦è´¡çŒ®å€¼ = 0.30 Ã— (ç²®é£Ÿå¾—åˆ†Ã—0.67 + è€•åœ°å¾—åˆ†Ã—0.33)
0.30 * (
  0.67 * CASE 
    WHEN ai_before.grain_yield > 0 AND ai_after.grain_yield > 0 
    THEN LEAST(1.0, (ai_after.grain_yield - ai_before.grain_yield) / ai_before.grain_yield / 0.08)
    ELSE 0.5 
  END +
  0.33 * CASE 
    WHEN ai_before.arable_land > 0 AND ai_after.arable_land > 0 
    THEN LEAST(1.0, (ai_after.arable_land - ai_before.arable_land) / ai_before.arable_land / 0.05 + 0.5)
    ELSE 0.5 
  END
)
```

**è¯„åˆ†ç¤ºä¾‹**ï¼š
- å¿Cï¼šç²®é£Ÿäº§é‡å¢é•¿6%ã€è€•åœ°é¢ç§¯å‡å°‘2%
  - ç²®é£Ÿå¾—åˆ†ï¼š6% / 8% = 0.75
  - è€•åœ°å¾—åˆ†ï¼š-2% / 5% + 0.5 = 0.10ï¼ˆè´Ÿå¢é•¿é™åˆ†ï¼‰
  - å†œä¸šç»´åº¦ï¼š0.30 Ã— (0.75Ã—0.67 + 0.10Ã—0.33) = 0.16

#### ç»´åº¦3ï¼šåŸºç¡€è®¾æ–½ï¼ˆ20%æƒé‡ï¼‰

**æŒ‡æ ‡ç»„æˆ**ï¼š
- **å…¬è·¯é‡Œç¨‹å¢é•¿ç‡**ï¼ˆå åŸºå»ºç»´åº¦50%ï¼‰
  - å½’ä¸€åŒ–æ ‡å‡†ï¼š6%å¢é•¿ç‡ = 1.0æ»¡åˆ†
  
- **å®½å¸¦ç”¨æˆ·å¢é•¿ç‡**ï¼ˆå åŸºå»ºç»´åº¦50%ï¼‰
  - å½’ä¸€åŒ–æ ‡å‡†ï¼š20%å¢é•¿ç‡ = 1.0æ»¡åˆ†ï¼ˆå®½å¸¦æ™®åŠé€Ÿåº¦å¿«ï¼‰

**SQLå®ç°**ï¼š
```sql
-- åŸºå»ºç»´åº¦è´¡çŒ®å€¼ = 0.20 Ã— (å…¬è·¯å¾—åˆ†Ã—0.5 + å®½å¸¦å¾—åˆ†Ã—0.5)
0.20 * (
  0.50 * CASE 
    WHEN ii_before.road_mileage > 0 AND ii_after.road_mileage > 0 
    THEN LEAST(1.0, (ii_after.road_mileage - ii_before.road_mileage) / ii_before.road_mileage / 0.06)
    ELSE 0.5 
  END +
  0.50 * CASE 
    WHEN ii_before.broadband_users > 0 AND ii_after.broadband_users > 0 
    THEN LEAST(1.0, (ii_after.broadband_users - ii_before.broadband_users) / ii_before.broadband_users / 0.20)
    ELSE 0.5 
  END
)
```

#### ç»´åº¦4ï¼šç¤¾ä¼šä¿éšœï¼ˆ10%æƒé‡ï¼‰

**æŒ‡æ ‡ç»„æˆ**ï¼š
- **åŒ»ç–—åºŠä½å¢é•¿ç‡**ï¼ˆå ç¤¾ä¿ç»´åº¦50%ï¼‰
  - å½’ä¸€åŒ–æ ‡å‡†ï¼š8%å¢é•¿ç‡ = 1.0æ»¡åˆ†
  
- **åŒ»ä¿å‚ä¿äººæ•°å¢é•¿ç‡**ï¼ˆå ç¤¾ä¿ç»´åº¦50%ï¼‰
  - å½’ä¸€åŒ–æ ‡å‡†ï¼š5%å¢é•¿ç‡ = 1.0æ»¡åˆ†

**SQLå®ç°**ï¼š
```sql
-- ç¤¾ä¿ç»´åº¦è´¡çŒ®å€¼ = 0.10 Ã— (åºŠä½å¾—åˆ†Ã—0.5 + åŒ»ä¿å¾—åˆ†Ã—0.5)
0.10 * (
  0.50 * CASE 
    WHEN mi_before.medical_beds > 0 AND mi_after.medical_beds > 0 
    THEN LEAST(1.0, (mi_after.medical_beds - mi_before.medical_beds) / mi_before.medical_beds / 0.08)
    ELSE 0.5 
  END +
  0.50 * CASE 
    WHEN mi_before.medical_insurance_users > 0 AND mi_after.medical_insurance_users > 0 
    THEN LEAST(1.0, (mi_after.medical_insurance_users - mi_before.medical_insurance_users) / mi_before.medical_insurance_users / 0.05)
    ELSE 0.5 
  END
)
```

#### æœ€ç»ˆå¼ºåº¦å€¼è®¡ç®—

**å…¬å¼**ï¼š
```
strength = GREATEST(0.20, LEAST(0.95, 
  ç»æµç»´åº¦è´¡çŒ® + å†œä¸šç»´åº¦è´¡çŒ® + åŸºå»ºç»´åº¦è´¡çŒ® + ç¤¾ä¿ç»´åº¦è´¡çŒ®
))
```

**ä¸Šä¸‹é™æ§åˆ¶**ï¼š
- **ä¸‹é™0.20**ï¼šå³ä½¿æ‰€æœ‰æŒ‡æ ‡éƒ½æ— æ•°æ®ï¼Œä¹Ÿä¿è¯æœ€ä½è¯„åˆ†
- **ä¸Šé™0.95**ï¼šé¿å…æ»¡åˆ†1.0ï¼Œä¸ºæœªæ¥ä¼˜åŒ–é¢„ç•™ç©ºé—´

**å®Œæ•´è®¡ç®—ç¤ºä¾‹**ï¼š

æŸå¿æŸæ”¿ç­–çš„è®¡ç®—ï¼š
- ç»æµç»´åº¦ï¼š0.32ï¼ˆGDPå¢12%ã€æ”¶å…¥å¢8%ï¼‰
- å†œä¸šç»´åº¦ï¼š0.16ï¼ˆç²®é£Ÿå¢6%ã€è€•åœ°å‡2%ï¼‰
- åŸºå»ºç»´åº¦ï¼š0.15ï¼ˆå…¬è·¯å¢5%ã€å®½å¸¦å¢18%ï¼‰
- ç¤¾ä¿ç»´åº¦ï¼š0.06ï¼ˆåºŠä½å¢7%ã€åŒ»ä¿å¢4%ï¼‰
- **æœ€ç»ˆå¼ºåº¦**ï¼š0.32 + 0.16 + 0.15 + 0.06 = **0.69**

#### æ•°æ®ç¼ºå¤±å¤„ç†

**ç­–ç•¥**ï¼šä½¿ç”¨ `COALESCE` å‡½æ•°ä¸ºæ¯ä¸ªç»´åº¦è®¾ç½®é»˜è®¤å€¼
- ç»æµç»´åº¦ç¼ºå¤±ï¼šé»˜è®¤0.20ï¼ˆä¿å®ˆä¼°è®¡ï¼‰
- å†œä¸šç»´åº¦ç¼ºå¤±ï¼šé»˜è®¤0.15
- åŸºå»ºç»´åº¦ç¼ºå¤±ï¼šé»˜è®¤0.10
- ç¤¾ä¿ç»´åº¦ç¼ºå¤±ï¼šé»˜è®¤0.05

**SQLç¤ºä¾‹**ï¼š
```sql
COALESCE((ç»æµç»´åº¦è®¡ç®—), 0.20) +  -- æ•°æ®ç¼ºå¤±æ—¶ç»™0.20
COALESCE((å†œä¸šç»´åº¦è®¡ç®—), 0.15) +
COALESCE((åŸºå»ºç»´åº¦è®¡ç®—), 0.10) +
COALESCE((ç¤¾ä¿ç»´åº¦è®¡ç®—), 0.05)
```

#### å¼ºåº¦å€¼åˆ†å¸ƒç»Ÿè®¡

æ‰§è¡Œè¿ç§»åï¼Œå¯æŸ¥è¯¢å¼ºåº¦åˆ†å¸ƒï¼š
```sql
SELECT 
  CASE 
    WHEN strength < 0.40 THEN 'ä½æ•ˆ(<0.40)'
    WHEN strength < 0.60 THEN 'ä¸­ç­‰(0.40-0.60)'
    WHEN strength < 0.80 THEN 'è‰¯å¥½(0.60-0.80)'
    ELSE 'ä¼˜ç§€(â‰¥0.80)'
  END as effect_level,
  COUNT(*) as count,
  ROUND(AVG(strength), 3) as avg_strength,
  ROUND(MIN(strength), 3) as min_strength,
  ROUND(MAX(strength), 3) as max_strength
FROM rel_policy_county
GROUP BY effect_level
ORDER BY avg_strength;
```

**é¢„æœŸç»“æœç¤ºä¾‹**ï¼š
```
æ•ˆæœç­‰çº§        æ•°é‡  å¹³å‡å¼ºåº¦  æœ€å°å€¼  æœ€å¤§å€¼
ä½æ•ˆ(<0.40)     5     0.320    0.220   0.380
ä¸­ç­‰(0.40-0.60) 15    0.520    0.410   0.590
è‰¯å¥½(0.60-0.80) 25    0.680    0.610   0.780
ä¼˜ç§€(â‰¥0.80)     8     0.850    0.810   0.950
```

---

2. **`policy_keywords` è¡¨**ï¼ˆæ”¿ç­–å…³é”®è¯è¡¨ï¼‰
   ```sql
   CREATE TABLE policy_keywords (
     policy_id VARCHAR(50),
     keyword VARCHAR(100),
     weight DECIMAL(3,2) DEFAULT 1.0,
     PRIMARY KEY (policy_id, keyword)
   );
   ```
   - å­˜å‚¨ä»æ”¿ç­–æ‘˜è¦ä¸­æå–çš„å…³é”®è¯
   - `weight`: å…³é”®è¯æƒé‡(0-1)ï¼Œç”¨äºç›¸å…³åº¦è®¡ç®—
   - ç¤ºä¾‹æ•°æ®ï¼š('POL001', 'é©¬é“ƒè–¯', 1.0), ('POL001', 'ç§è–¯', 0.9)

---

### ğŸ“š å£è¿°å²ï¼ˆè®¿è°ˆï¼‰æ•°æ®è¡¨ä½“ç³»

#### æ ¸å¿ƒè¡¨è®¾è®¡

æ”¿ç­–å¯è§†åŒ–ç³»ç»Ÿä¸­ï¼Œå£è¿°å²æ•°æ®é€šè¿‡**4ä¸ªæ ¸å¿ƒè¡¨ + 2ä¸ªå…³è”è¡¨**å®ç°å®Œæ•´çš„è®¿è°ˆæ•°æ®ç®¡ç†ï¼Œå¹¶é€šè¿‡`policy_interview_cache`ä¸æ”¿ç­–ç³»ç»Ÿå…³è”ã€‚

##### 1. **`interviewees` è¡¨**ï¼ˆå—è®¿è€…è¡¨ï¼‰
```sql
CREATE TABLE interviewees (
  interviewee_id VARCHAR(50) PRIMARY KEY COMMENT 'å—è®¿è€…å”¯ä¸€æ ‡è¯†',
  name VARCHAR(100) COMMENT 'å§“å',
  unit VARCHAR(100) COMMENT 'å·¥ä½œå•ä½',
  identity VARCHAR(50) COMMENT 'èº«ä»½æ ‡ç­¾ï¼ˆæ‘æ°‘/å¹²éƒ¨/ä¼ä¸šä¸»ç­‰ï¼‰',
  county_id VARCHAR(50) COMMENT 'æ‰€å±å¿ID [FK â†’ counties]',
  FOREIGN KEY (county_id) REFERENCES counties(county_id)
);
```

**å­—æ®µè¯´æ˜**ï¼š
- `interviewee_id`: å—è®¿è€…IDï¼Œæ ¼å¼å¦‚ `IVE001`, `IVE002`
- `identity`: å—è®¿è€…èº«ä»½åˆ†ç±»
  - **æ‘æ°‘/å†œæˆ·**ï¼šä¸€çº¿è„±è´«å—ç›Šè€…
  - **æ‘å¹²éƒ¨/ä¹¡é•‡å¹²éƒ¨**ï¼šåŸºå±‚æ”¿ç­–æ‰§è¡Œè€…
  - **ä¼ä¸šä¸»/åˆä½œç¤¾è´Ÿè´£äºº**ï¼šäº§ä¸šå¸¦å¤´äºº
  - **é©»æ‘å¹²éƒ¨/æ‰¶è´«ä¸“å‘˜**ï¼šä¸“èŒæ‰¶è´«å·¥ä½œè€…
- `county_id`: å…³è”åˆ°`counties`è¡¨ï¼Œç”¨äºåœ°åŸŸåˆ†æ

**ç¤ºä¾‹æ•°æ®**ï¼š
```sql
INSERT INTO interviewees VALUES 
('IVE001', 'å¼ ä¸‰', 'æŸæŸæ‘å§”ä¼š', 'æ‘æ”¯ä¹¦', 'C001'),
('IVE002', 'æå››', 'æŸæŸå†œæ°‘ä¸“ä¸šåˆä½œç¤¾', 'ç†äº‹é•¿', 'C001'),
('IVE003', 'ç‹äº”', NULL, 'å†œæˆ·', 'C002');
```

**åº”ç”¨åœºæ™¯**ï¼š
- æŒ‰èº«ä»½ç»Ÿè®¡å—è®¿è€…åˆ†å¸ƒï¼ˆæ‘å¹²éƒ¨å æ¯”ã€å†œæˆ·å æ¯”ï¼‰
- æŒ‰å¿åŸŸç­›é€‰ç›¸å…³è®¿è°ˆå¯¹è±¡
- å…³è”æ”¿ç­–æ•ˆæœæ—¶è¯†åˆ«ä¸åŒè§†è§’ï¼ˆæ”¿ç­–æ‰§è¡Œè€… vs å—ç›Šè€…ï¼‰

---

##### 2. **`interview_events` è¡¨**ï¼ˆè®¿è°ˆäº‹ä»¶è¡¨ï¼‰
```sql
CREATE TABLE interview_events (
  event_id VARCHAR(50) PRIMARY KEY COMMENT 'è®¿è°ˆäº‹ä»¶ID',
  location VARCHAR(255) COMMENT 'è®¿è°ˆåœ°ç‚¹ï¼ˆè¯¦ç»†åœ°å€ï¼‰',
  event_date DATE COMMENT 'è®¿è°ˆæ—¥æœŸ',
  topic VARCHAR(255) COMMENT 'è®¿è°ˆä¸»é¢˜',
  INDEX idx_event_date (event_date)
);
```

**å­—æ®µè¯´æ˜**ï¼š
- `event_id`: è®¿è°ˆäº‹ä»¶å”¯ä¸€æ ‡è¯†ï¼Œæ ¼å¼å¦‚ `EVT001`
- `location`: è®¿è°ˆå‘ç”Ÿåœ°ï¼ˆå¦‚"æŸæŸå¿æŸæŸæ‘æ‘å§”ä¼šåŠå…¬å®¤"ï¼‰
- `topic`: æœ¬æ¬¡è®¿è°ˆä¸»é¢˜ï¼ˆå¦‚"äº§ä¸šæ‰¶è´«ç»éªŒè®¿è°ˆ"ã€"æ˜“åœ°æ¬è¿æ”¿ç­–è½å®æƒ…å†µè°ƒç ”"ï¼‰

**ç¤ºä¾‹æ•°æ®**ï¼š
```sql
INSERT INTO interview_events VALUES 
('EVT001', 'æŸæŸå¿æŸæŸæ‘æ‘å§”ä¼š', '2020-07-15', 'é©¬é“ƒè–¯äº§ä¸šæ‰¶è´«ç»éªŒè®¿è°ˆ'),
('EVT002', 'æŸæŸå¿æ‰¶è´«åŠä¼šè®®å®¤', '2021-03-20', 'å¥åº·æ‰¶è´«æ”¿ç­–æ‰§è¡Œæƒ…å†µè°ƒç ”');
```

**è®¾è®¡ç†å¿µ**ï¼š
- ä¸€æ¬¡è®¿è°ˆäº‹ä»¶å¯ä»¥æœ‰å¤šä¸ªå—è®¿è€…ï¼ˆé€šè¿‡`rel_interviewee_event`å…³è”ï¼‰
- ä¸€æ¬¡äº‹ä»¶äº§ç”Ÿä¸€ä»½æˆ–å¤šä»½è®¿è°ˆè®°å½•ï¼ˆ`interview_data.event_id`å¤–é”®ï¼‰

---

##### 3. **`interview_data` è¡¨**ï¼ˆè®¿è°ˆæ•°æ®/å†…å®¹è¡¨ï¼‰
```sql
CREATE TABLE interview_data (
  data_id VARCHAR(50) PRIMARY KEY COMMENT 'è®¿è°ˆè®°å½•ID',
  content LONGTEXT COMMENT 'è®¿è°ˆå†…å®¹å…¨æ–‡ï¼ˆå£è¿°è®°å½•/æ•´ç†ç¨¿ï¼‰',
  keywords VARCHAR(255) COMMENT 'æå–çš„å…³é”®è¯ï¼ˆé€—å·åˆ†éš”ï¼‰',
  experience_summary TEXT COMMENT 'è„±è´«ç»éªŒæ€»ç»“ï¼ˆæç‚¼çš„æ ¸å¿ƒå†…å®¹ï¼‰',
  event_id VARCHAR(50) COMMENT 'æ‰€å±è®¿è°ˆäº‹ä»¶ID [FK â†’ interview_events]',
  FOREIGN KEY (event_id) REFERENCES interview_events(event_id)
);
```

**å­—æ®µè¯´æ˜**ï¼š
- `content`: **æ ¸å¿ƒå­—æ®µ**ï¼Œå­˜å‚¨è®¿è°ˆçš„å®Œæ•´å£è¿°å†…å®¹
  - å¯èƒ½æ˜¯å½•éŸ³è½¬å†™æ–‡å­—
  - æˆ–è°ƒç ”å‘˜æ•´ç†çš„è®¿è°ˆè®°å½•ç¨¿
  - æ”¯æŒå…¨æ–‡æ£€ç´¢ï¼ˆç”¨äºå…³é”®è¯åŒ¹é…ï¼‰
- `keywords`: ä»å†…å®¹ä¸­æå–çš„å…³é”®è¯ï¼ˆäººå·¥æ ‡æ³¨æˆ–NLPæå–ï¼‰
  - å¦‚ï¼š"é©¬é“ƒè–¯,è¡¥è´´,åˆä½œç¤¾,æ”¶å…¥å¢é•¿"
  - ç”¨äºå¿«é€ŸåŒ¹é…ç›¸å…³æ”¿ç­–
- `experience_summary`: ç²¾ç‚¼çš„ç»éªŒæ€»ç»“
  - å¦‚ï¼š"é€šè¿‡æ”¿åºœè¡¥è´´æ¨å¹¿ä¼˜è´¨ç§è–¯ï¼Œäº©äº§é‡æå‡40%ï¼Œæˆ·å‡å¢æ”¶5000å…ƒ"

**ç¤ºä¾‹æ•°æ®**ï¼š
```sql
INSERT INTO interview_data VALUES 
('DAT001', 
 'æˆ‘ä»¬æ‘ä»2018å¹´å¼€å§‹ç§é©¬é“ƒè–¯ï¼Œæ”¿åºœç»™äº†ç§è–¯è¡¥è´´ï¼Œæ¯äº©è¡¥500å—é’±ã€‚æˆ‘ä»¬åˆä½œç¤¾ç»Ÿä¸€é‡‡è´­äº†è„±æ¯’ç§è–¯ï¼Œäº§é‡æ¯”ä»¥å‰æé«˜äº†ä¸€å¤§æˆª...ï¼ˆçœç•¥2000å­—ï¼‰',
 'é©¬é“ƒè–¯,ç§è–¯è¡¥è´´,åˆä½œç¤¾,äº§é‡æå‡',
 'æ”¿åºœç§è–¯è¡¥è´´æ”¿ç­–å¸¦åŠ¨é©¬é“ƒè–¯äº§ä¸šå‘å±•ï¼Œé€šè¿‡åˆä½œç¤¾ç»Ÿä¸€é‡‡è´­ä¼˜è´¨ç§è–¯ï¼Œäº©äº§é‡æå‡40%ï¼Œæˆ·å‡å¢æ”¶5000å…ƒ',
 'EVT001');
```

**åº”ç”¨åœºæ™¯**ï¼š
- **æ”¿ç­–æ•ˆæœéªŒè¯**ï¼šé€šè¿‡å†…å®¹ä¸­çš„å…·ä½“æ•°æ®ï¼ˆå¦‚"å¢æ”¶5000å…ƒ"ï¼‰éªŒè¯æ”¿ç­–å®æ–½æ•ˆæœ
- **æ”¿ç­–å…³é”®è¯åŒ¹é…**ï¼šåœ¨`policy_interview_cache`ä¸­é€šè¿‡`keywords`å’Œ`content`å­—æ®µåŒ¹é…æ”¿ç­–å…³é”®è¯
- **ç»éªŒæç‚¼å±•ç¤º**ï¼šåœ¨å¯è§†åŒ–ç•Œé¢å±•ç¤º`experience_summary`ä½œä¸ºæ”¿ç­–æˆæœæ¡ˆä¾‹

---

##### 4. **`researchers` è¡¨**ï¼ˆè°ƒç ”è€…è¡¨ï¼‰
```sql
CREATE TABLE researchers (
  researcher_id VARCHAR(50) PRIMARY KEY COMMENT 'è°ƒç ”è€…ID',
  name VARCHAR(100) COMMENT 'å§“å',
  unit VARCHAR(100) COMMENT 'æ‰€å±å•ä½',
  role VARCHAR(50) COMMENT 'è§’è‰²ï¼ˆç ”ç©¶å‘˜/åŠ©ç†/å­¦ç”Ÿç­‰ï¼‰'
);
```

**å­—æ®µè¯´æ˜**ï¼š
- `researcher_id`: è°ƒç ”å‘˜å”¯ä¸€æ ‡è¯†ï¼Œå¦‚ `RES001`
- `role`: è°ƒç ”è§’è‰²
  - **ä¸»æŒäºº/è®¿è°ˆå‘˜**ï¼šè´Ÿè´£è®¿è°ˆè¿‡ç¨‹
  - **è®°å½•å‘˜**ï¼šè´Ÿè´£è®°å½•æ•´ç†
  - **ç ”ç©¶å‘˜**ï¼šé¡¹ç›®è´Ÿè´£äºº

**ç¤ºä¾‹æ•°æ®**ï¼š
```sql
INSERT INTO researchers VALUES 
('RES001', 'èµµç ”ç©¶å‘˜', 'æŸæŸå¤§å­¦ç¤¾ä¼šå­¦ç³»', 'ä¸»æŒäºº'),
('RES002', 'å­™åŠ©ç†', 'æŸæŸå¤§å­¦ç¤¾ä¼šå­¦ç³»', 'è®°å½•å‘˜');
```

---

#### å…³è”è¡¨è®¾è®¡

##### 5. **`rel_interviewee_event` è¡¨**ï¼ˆå—è®¿è€…-äº‹ä»¶å…³è”è¡¨ï¼‰
```sql
CREATE TABLE rel_interviewee_event (
  interviewee_id VARCHAR(50) COMMENT 'å—è®¿è€…ID [FK]',
  event_id VARCHAR(50) COMMENT 'äº‹ä»¶ID [FK]',
  role VARCHAR(50) COMMENT 'å‚ä¸è§’è‰²ï¼ˆä¸»è®²äºº/è§è¯äººç­‰ï¼‰',
  PRIMARY KEY (interviewee_id, event_id),
  FOREIGN KEY (interviewee_id) REFERENCES interviewees(interviewee_id),
  FOREIGN KEY (event_id) REFERENCES interview_events(event_id)
);
```

**å…³ç³»è¯´æ˜**ï¼š
- **å¤šå¯¹å¤šå…³ç³»**ï¼šä¸€æ¬¡è®¿è°ˆäº‹ä»¶å¯ä»¥æœ‰å¤šä¸ªå—è®¿è€…ï¼Œä¸€ä¸ªå—è®¿è€…å¯ä»¥å‚ä¸å¤šæ¬¡è®¿è°ˆ
- `role`: åŒºåˆ†å—è®¿è€…åœ¨è¯¥äº‹ä»¶ä¸­çš„è§’è‰²
  - **ä¸»è®²äºº**ï¼šä¸»è¦å‘è¨€å¯¹è±¡
  - **è§è¯äºº**ï¼šè¡¥å……å‘è¨€ã€æä¾›ä½è¯

**ç¤ºä¾‹æ•°æ®**ï¼š
```sql
INSERT INTO rel_interviewee_event VALUES 
('IVE001', 'EVT001', 'ä¸»è®²äºº'),  -- æ‘æ”¯ä¹¦ä½œä¸ºä¸»è®²äºº
('IVE002', 'EVT001', 'è§è¯äºº');  -- åˆä½œç¤¾ç†äº‹é•¿ä½œä¸ºè§è¯äºº
```

---

##### 6. **`rel_data_researcher` è¡¨**ï¼ˆè®¿è°ˆæ•°æ®-è°ƒç ”è€…å…³è”è¡¨ï¼‰
```sql
CREATE TABLE rel_data_researcher (
  data_id VARCHAR(50) COMMENT 'è®¿è°ˆè®°å½•ID [FK]',
  researcher_id VARCHAR(50) COMMENT 'è°ƒç ”è€…ID [FK]',
  collection_role VARCHAR(50) COMMENT 'æ”¶é›†è§’è‰²ï¼ˆä¸»æŒäºº/è®°å½•å‘˜ç­‰ï¼‰',
  PRIMARY KEY (data_id, researcher_id),
  FOREIGN KEY (data_id) REFERENCES interview_data(data_id),
  FOREIGN KEY (researcher_id) REFERENCES researchers(researcher_id)
);
```

**å…³ç³»è¯´æ˜**ï¼š
- **å¤šå¯¹å¤šå…³ç³»**ï¼šä¸€ä»½è®¿è°ˆè®°å½•å¯èƒ½ç”±å¤šäººåä½œå®Œæˆï¼Œä¸€ä¸ªè°ƒç ”è€…å¯ä»¥å‚ä¸å¤šä»½è®°å½•
- `collection_role`: è®°å½•æ¯ä¸ªè°ƒç ”è€…åœ¨è¯¥è®°å½•ä¸­çš„èŒè´£

**ç¤ºä¾‹æ•°æ®**ï¼š
```sql
INSERT INTO rel_data_researcher VALUES 
('DAT001', 'RES001', 'è®¿è°ˆä¸»æŒäºº'),
('DAT001', 'RES002', 'è®°å½•æ•´ç†');
```

---

#### è®¿è°ˆæ•°æ®æŸ¥è¯¢ç¤ºä¾‹

##### æŸ¥è¯¢1ï¼šæŸå¿çš„æ‰€æœ‰è®¿è°ˆè®°å½•åŠå—è®¿è€…ä¿¡æ¯
```sql
SELECT 
  ie.county_name,
  evt.topic,
  evt.event_date,
  GROUP_CONCAT(ivee.name SEPARATOR ', ') as interviewees,
  id.keywords,
  id.experience_summary
FROM counties ie
JOIN interviewees ivee ON ie.county_id = ivee.county_id
JOIN rel_interviewee_event rie ON ivee.interviewee_id = rie.interviewee_id
JOIN interview_events evt ON rie.event_id = evt.event_id
JOIN interview_data id ON evt.event_id = id.event_id
WHERE ie.county_id = 'C001'
GROUP BY ie.county_name, evt.topic, evt.event_date, id.keywords, id.experience_summary;
```

##### æŸ¥è¯¢2ï¼šæŸæ”¿ç­–çš„æ‰€æœ‰å…³è”è®¿è°ˆï¼ˆé€šè¿‡ç¼“å­˜è¡¨ï¼‰
```sql
SELECT 
  p.policy_name,
  c.county_name,
  id.keywords,
  id.experience_summary,
  pic.relevance_score,
  pic.matched_keywords
FROM policy_interview_cache pic
JOIN policies p ON pic.policy_id = p.policy_id
JOIN counties c ON pic.county_id = c.county_id
JOIN interview_data id ON pic.data_id = id.data_id
WHERE pic.policy_id = 'POL001'
ORDER BY pic.relevance_score DESC
LIMIT 10;
```

##### æŸ¥è¯¢3ï¼šæŒ‰èº«ä»½ç»Ÿè®¡å—è®¿è€…åˆ†å¸ƒ
```sql
SELECT 
  identity,
  COUNT(*) as count,
  COUNT(DISTINCT county_id) as county_count
FROM interviewees
GROUP BY identity
ORDER BY count DESC;
```

**é¢„æœŸç»“æœ**ï¼š
```
èº«ä»½          æ•°é‡  è¦†ç›–å¿æ•°
æ‘å¹²éƒ¨         15    8
å†œæˆ·           20    10
ä¼ä¸šä¸»/åˆä½œç¤¾   8     6
é©»æ‘å¹²éƒ¨       5     4
```

---

#### å£è¿°å²æ•°æ®æµç¨‹

```
è®¿è°ˆå®æ–½
   â†“
åˆ›å»º interview_eventsï¼ˆè®°å½•æ—¶é—´åœ°ç‚¹ä¸»é¢˜ï¼‰
   â†“
å…³è” intervieweesï¼ˆé€šè¿‡ rel_interviewee_eventï¼‰
   â†“
æ•´ç†å½•å…¥ interview_dataï¼ˆå†…å®¹+å…³é”®è¯+ç»éªŒæ€»ç»“ï¼‰
   â†“
æ ‡è®° researchersï¼ˆé€šè¿‡ rel_data_researcherï¼‰
   â†“
è‡ªåŠ¨åŒ¹é… policy_keywordsï¼ˆè¿ç§»è„šæœ¬æ‰§è¡Œï¼‰
   â†“
ç”Ÿæˆ policy_interview_cacheï¼ˆæ”¿ç­–-è®¿è°ˆå…³è”ç¼“å­˜ï¼‰
   â†“
å‰ç«¯å¯è§†åŒ–å±•ç¤ºï¼ˆåœ¨æ”¿ç­–æ°”æ³¡ä¸Šæ˜¾ç¤ºå…³è”è®¿è°ˆæ•°ï¼‰
```

---

#### ä¸æ”¿ç­–ç³»ç»Ÿçš„é›†æˆ

è®¿è°ˆæ•°æ®é€šè¿‡ä»¥ä¸‹æœºåˆ¶ä¸æ”¿ç­–å¯è§†åŒ–ç³»ç»Ÿæ·±åº¦é›†æˆï¼š

1. **å…³é”®è¯åŒ¹é…æœºåˆ¶**
   - `policy_keywords` è¡¨å­˜å‚¨æ”¿ç­–å…³é”®è¯
   - è¿ç§»è„šæœ¬è‡ªåŠ¨æ‰«æ `interview_data.keywords` å’Œ `interview_data.content`
   - åŒ¹é…æˆåŠŸåˆ™ç”Ÿæˆ `policy_interview_cache` è®°å½•

2. **ç›¸å…³åº¦è¯„åˆ†**
   - å…¬å¼ï¼š`(åŒ¹é…å…³é”®è¯æ•°é‡ Ã— 1.5) + 3.0`
   - ç”¨äºæ’åºå’Œç­›é€‰é«˜ç›¸å…³è®¿è°ˆ

3. **åœ°åŸŸå…³è”**
   - `interviewees.county_id` â†’ `counties.county_id` â†’ `rel_policy_county.county_id`
   - ç¡®ä¿è®¿è°ˆå†…å®¹ä¸æ”¿ç­–å®æ–½å¿åŸŸåŒ¹é…

4. **å‰ç«¯å±•ç¤º**
   - æ”¿ç­–æ°”æ³¡ä¸Šæ˜¾ç¤º `interview_count`ï¼ˆä» `v_policy_stats` è§†å›¾è¯»å–ï¼‰
   - ç‚¹å‡»æ°”æ³¡å¯æŸ¥çœ‹å…³è”è®¿è°ˆçš„ `experience_summary`
   - æ”¯æŒæŒ‰ç›¸å…³åº¦æ’åºå±•ç¤ºè®¿è°ˆæ¡ˆä¾‹

---

3. **`policy_interview_cache` è¡¨**ï¼ˆæ”¿ç­–-è®¿è°ˆå…³è”ç¼“å­˜è¡¨ï¼‰
   ```sql
   CREATE TABLE policy_interview_cache (
     policy_id VARCHAR(50),
     data_id VARCHAR(50),
     county_id VARCHAR(50),
     relevance_score DECIMAL(4,2) DEFAULT 1.0,
     matched_keywords TEXT,
     updated_at TIMESTAMP,
     PRIMARY KEY (policy_id, data_id),
     FOREIGN KEY (policy_id) REFERENCES policies(policy_id),
     FOREIGN KEY (data_id) REFERENCES interview_data(data_id),
     FOREIGN KEY (county_id) REFERENCES counties(county_id)
   );
   ```
   - **æ ¸å¿ƒä½œç”¨**ï¼šé¢„è®¡ç®—æ”¿ç­–-è®¿è°ˆç›¸å…³åº¦ï¼Œé¿å…å®æ—¶å¤æ‚æŸ¥è¯¢
   - **æ¡¥æ¥è§’è‰²**ï¼šè¿æ¥æ”¿ç­–ç³»ç»Ÿä¸å£è¿°å²æ•°æ®ä½“ç³»
   - `data_id`: å¤–é”®å…³è”åˆ° `interview_data` è¡¨ï¼ˆè®¿è°ˆå†…å®¹è¡¨ï¼‰
   - `relevance_score`: ç›¸å…³åº¦è¯„åˆ†(0-10åˆ†åˆ¶)ï¼ŒåŸºäºå…³é”®è¯åŒ¹é…æ•°é‡è®¡ç®—
   - `matched_keywords`: åŒ¹é…åˆ°çš„å…³é”®è¯åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ï¼Œæ¥è‡ª `policy_keywords` è¡¨
   - è‡ªåŠ¨å¡«å……ï¼šè¿ç§»è„šæœ¬æ‰§è¡Œæ—¶è‡ªåŠ¨ç”Ÿæˆï¼ˆè§ä¸‹æ–¹"ç›¸å…³åº¦è®¡ç®—é€»è¾‘"ï¼‰

##### B. æ”¿ç­–-è®¿è°ˆç›¸å…³åº¦è®¡ç®—é€»è¾‘

**è®¡ç®—ç›®æ ‡**ï¼šå°†æ”¿ç­–ä¸è®¿è°ˆæ•°æ®è‡ªåŠ¨å…³è”ï¼Œé‡åŒ–ä¸¤è€…çš„ç›¸å…³ç¨‹åº¦ï¼Œä¾¿äºå‰ç«¯å±•ç¤º"è¯¥æ”¿ç­–è¢«Xæ¬¡è®¿è°ˆæåŠ"ã€‚

---

#### ç›¸å…³åº¦è¯„åˆ†å…¬å¼

```
relevance_score = (åŒ¹é…å…³é”®è¯æ•°é‡ Ã— 1.5) + 3.0
```

**å‚æ•°è¯´æ˜**ï¼š
- **åŒ¹é…å…³é”®è¯æ•°é‡**ï¼šä» `policy_keywords` è¡¨ä¸­è¯»å–è¯¥æ”¿ç­–çš„æ‰€æœ‰å…³é”®è¯ï¼Œæ£€æŸ¥åœ¨è®¿è°ˆæ•°æ®ä¸­å‡ºç°çš„ä¸ªæ•°
- **æƒé‡1.5**ï¼šæ¯ä¸ªå…³é”®è¯è´¡çŒ®1.5åˆ†ï¼ˆå¯è°ƒèŠ‚ï¼‰
- **åŸºç¡€åˆ†3.0**ï¼šç¡®ä¿å³ä½¿åªæœ‰åœ°åŸŸå…³è”ï¼ˆæ— å…³é”®è¯åŒ¹é…ï¼‰ä¹Ÿæœ‰åŸºç¡€åˆ†

**è¯„åˆ†ç¤ºä¾‹**ï¼š
| åŒ¹é…å…³é”®è¯æ•° | è®¡ç®—è¿‡ç¨‹ | ç›¸å…³åº¦å¾—åˆ† | è¯„çº§ |
|------------|---------|-----------|------|
| 0 | 0Ã—1.5 + 3.0 | 3.0 | ä½ç›¸å…³ |
| 2 | 2Ã—1.5 + 3.0 | 6.0 | ä¸­ç­‰ç›¸å…³ |
| 4 | 4Ã—1.5 + 3.0 | 9.0 | é«˜åº¦ç›¸å…³ |
| 5+ | 5Ã—1.5 + 3.0 | â‰¥10.5 (å°é¡¶10) | å¼ºç›¸å…³ |

---

#### å…³é”®è¯åŒ¹é…è§„åˆ™

**æ•°æ®æº**ï¼š
- æ”¿ç­–å…³é”®è¯ï¼š`policy_keywords` è¡¨ä¸­çš„ `keyword` å­—æ®µ
- è®¿è°ˆæ•°æ®ï¼š`interview_data` è¡¨çš„ä¸¤ä¸ªå­—æ®µ
  - `keywords`ï¼ˆç»“æ„åŒ–å…³é”®è¯ï¼Œé€—å·åˆ†éš”ï¼‰
  - `content`ï¼ˆå…¨æ–‡å†…å®¹ï¼ŒLONGTEXTï¼‰

**åŒ¹é…é€»è¾‘**ï¼š
```sql
-- å…³é”®è¯åŒ¹é…æ¡ä»¶ï¼ˆä¸¤è€…æ»¡è¶³å…¶ä¸€å³å¯ï¼‰
WHERE id.keywords LIKE CONCAT('%', pk.keyword, '%')   -- åœ¨ç»“æ„åŒ–å…³é”®è¯ä¸­åŒ¹é…
   OR id.content LIKE CONCAT('%', pk.keyword, '%')    -- åœ¨å…¨æ–‡ä¸­æ¨¡ç³ŠåŒ¹é…
```

**ç¤ºä¾‹**ï¼š
- æ”¿ç­–"é©¬é“ƒè–¯äº§ä¸šæ‰¶è´«"çš„å…³é”®è¯ï¼š['é©¬é“ƒè–¯', 'ç§è–¯', 'è¡¥è´´']
- è®¿è°ˆAçš„keywordsï¼š`"é©¬é“ƒè–¯,åˆä½œç¤¾,æ”¶å…¥å¢é•¿"`
- è®¿è°ˆAçš„contentï¼š`"...æ”¿åºœç»™äº†ç§è–¯è¡¥è´´ï¼Œæ¯äº©è¡¥500å—..."`
- **åŒ¹é…ç»“æœ**ï¼š
  - "é©¬é“ƒè–¯" âœ… (åœ¨keywordsä¸­)
  - "ç§è–¯" âœ… (åœ¨contentä¸­)
  - "è¡¥è´´" âœ… (åœ¨contentä¸­)
  - **ç›¸å…³åº¦å¾—åˆ†**ï¼š3Ã—1.5 + 3.0 = **7.5åˆ†**

---

#### ç¼“å­˜å¡«å……SQLï¼ˆå®Œæ•´ç‰ˆï¼‰

**æ‰§è¡Œæ—¶æœº**ï¼šè¿ç§»è„šæœ¬ `add_policy_enhancements.sql` ç¬¬5æ­¥è‡ªåŠ¨æ‰§è¡Œ

```sql
INSERT INTO policy_interview_cache (policy_id, data_id, county_id, relevance_score, matched_keywords)
SELECT DISTINCT
  rpc.policy_id,
  id.data_id,
  rpc.county_id,
  -- å­æŸ¥è¯¢1ï¼šè®¡ç®—ç›¸å…³åº¦è¯„åˆ†
  (SELECT COUNT(*) * 1.5 
   FROM policy_keywords pk 
   WHERE pk.policy_id = rpc.policy_id 
   AND (id.keywords LIKE CONCAT('%', pk.keyword, '%') 
        OR id.content LIKE CONCAT('%', pk.keyword, '%'))
  ) + 3.0 as relevance_score,
  -- å­æŸ¥è¯¢2ï¼šæ”¶é›†åŒ¹é…åˆ°çš„å…³é”®è¯
  (SELECT GROUP_CONCAT(pk.keyword SEPARATOR ',')
   FROM policy_keywords pk 
   WHERE pk.policy_id = rpc.policy_id 
   AND (id.keywords LIKE CONCAT('%', pk.keyword, '%') 
        OR id.content LIKE CONCAT('%', pk.keyword, '%'))
  ) as matched_keywords
FROM rel_policy_county rpc                          -- æ”¿ç­–è¦†ç›–çš„å¿
JOIN counties c ON rpc.county_id = c.county_id      -- å¿åŸºæœ¬ä¿¡æ¯
JOIN interviewees ie ON ie.county_id = c.county_id -- è¯¥å¿çš„å—è®¿è€…
JOIN rel_interviewee_event rie ON ie.interviewee_id = rie.interviewee_id  -- å—è®¿è€…å‚ä¸çš„è®¿è°ˆäº‹ä»¶
JOIN interview_events evt ON rie.event_id = evt.event_id                  -- è®¿è°ˆäº‹ä»¶è¯¦æƒ…
JOIN interview_data id ON evt.event_id = id.event_id                      -- è®¿è°ˆå†…å®¹æ•°æ®
ON DUPLICATE KEY UPDATE 
  relevance_score = VALUES(relevance_score),
  matched_keywords = VALUES(matched_keywords);
```

**JOINé“¾è·¯è¯´æ˜**ï¼š
```
æ”¿ç­–è¦†ç›–å¿ (rel_policy_county)
    â†“
å¿ä¿¡æ¯ (counties)
    â†“
è¯¥å¿å—è®¿è€… (interviewees)
    â†“
å—è®¿è€…å‚ä¸äº‹ä»¶ (rel_interviewee_event)
    â†“
è®¿è°ˆäº‹ä»¶ (interview_events)
    â†“
è®¿è°ˆå†…å®¹ (interview_data) â† åœ¨æ­¤å±‚è¿›è¡Œå…³é”®è¯åŒ¹é…
```

**å¹‚ç­‰æ€§ä¿è¯**ï¼š
- `ON DUPLICATE KEY UPDATE`ï¼šè‹¥ `(policy_id, data_id)` å·²å­˜åœ¨åˆ™æ›´æ–°è¯„åˆ†å’Œå…³é”®è¯
- æ”¯æŒé‡å¤æ‰§è¡Œè¿ç§»è„šæœ¬è€Œä¸äº§ç”Ÿé‡å¤è®°å½•

---

#### ç¼“å­˜è¡¨æŸ¥è¯¢ç¤ºä¾‹

##### ç¤ºä¾‹1ï¼šæŸ¥çœ‹æŸæ”¿ç­–çš„æ‰€æœ‰å…³è”è®¿è°ˆï¼ˆæŒ‰ç›¸å…³åº¦æ’åºï¼‰
```sql
SELECT 
  p.policy_name,
  c.county_name,
  pic.relevance_score,
  pic.matched_keywords,
  id.experience_summary
FROM policy_interview_cache pic
JOIN policies p ON pic.policy_id = p.policy_id
JOIN counties c ON pic.county_id = c.county_id
JOIN interview_data id ON pic.data_id = id.data_id
WHERE pic.policy_id = 'POL001'
ORDER BY pic.relevance_score DESC;
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
æ”¿ç­–åç§°              å¿å     ç›¸å…³åº¦  åŒ¹é…å…³é”®è¯          ç»éªŒæ€»ç»“
é©¬é“ƒè–¯äº§ä¸šæ‰¶è´«æ”¿ç­–    æŸæŸå¿   9.0     é©¬é“ƒè–¯,ç§è–¯,è¡¥è´´    é€šè¿‡æ”¿åºœè¡¥è´´æ¨å¹¿ä¼˜è´¨ç§è–¯...
é©¬é“ƒè–¯äº§ä¸šæ‰¶è´«æ”¿ç­–    å¦æŸå¿   6.0     é©¬é“ƒè–¯,è¡¥è´´         åˆä½œç¤¾ç»Ÿä¸€é‡‡è´­å¸¦åŠ¨å¢æ”¶...
é©¬é“ƒè–¯äº§ä¸šæ‰¶è´«æ”¿ç­–    ç¬¬ä¸‰å¿   3.0     (æ— )                è¯¥å¿ä¸»è¦ä¾é æ˜“åœ°æ¬è¿è„±è´«
```

##### ç¤ºä¾‹2ï¼šç»Ÿè®¡å„æ”¿ç­–çš„è®¿è°ˆè¦†ç›–æƒ…å†µ
```sql
SELECT 
  p.policy_id,
  p.policy_name,
  COUNT(DISTINCT pic.data_id) as interview_count,
  ROUND(AVG(pic.relevance_score), 2) as avg_relevance
FROM policies p
LEFT JOIN policy_interview_cache pic ON p.policy_id = pic.policy_id
GROUP BY p.policy_id, p.policy_name
ORDER BY interview_count DESC;
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
æ”¿ç­–ID   æ”¿ç­–åç§°              è®¿è°ˆæ•°  å¹³å‡ç›¸å…³åº¦
POL001   é©¬é“ƒè–¯äº§ä¸šæ‰¶è´«æ”¿ç­–     8       7.50
POL002   å¥åº·æ‰¶è´«å…œåº•æ”¿ç­–       5       6.20
POL003   ç”Ÿæ€æ—…æ¸¸å‘å±•æ”¿ç­–       3       5.00
```

##### C. `policy_resources` è¡¨å¢å¼º

**æ–°å¢å­—æ®µ**ï¼ˆèµ„æºæŠ•å…¥é‡åŒ–ï¼‰ï¼š
```sql
ALTER TABLE policy_resources ADD COLUMN amount DECIMAL(12,2);
ALTER TABLE policy_resources ADD COLUMN beneficiary_count INT;
ALTER TABLE policy_resources ADD COLUMN year INT;
```
- `amount`: èµ„é‡‘æŠ•å…¥é‡‘é¢ï¼ˆå•ä½ï¼šä¸‡å…ƒï¼‰
- `beneficiary_count`: å—ç›Šäººæ•°
- `year`: æŠ•å…¥å¹´ä»½

##### D. `v_policy_stats` è§†å›¾ï¼ˆæ”¿ç­–ç»Ÿè®¡è§†å›¾ï¼‰

**è®¾è®¡ç†å¿µ**ï¼šä½¿ç”¨å­æŸ¥è¯¢æ›¿ä»£ LEFT JOIN + GROUP BYï¼Œé¿å…ç¬›å¡å°”ç§¯å¯¼è‡´çš„ç»Ÿè®¡é”™è¯¯

```sql
CREATE OR REPLACE VIEW v_policy_stats AS
SELECT 
  p.policy_id,
  p.policy_name,
  p.policy_type,
  p.department,
  p.issue_date,
  p.implementation_date,
  p.status,
  p.summary,
  -- å­æŸ¥è¯¢1: è¦†ç›–å¿æ•°ï¼ˆé¿å…JOINå¯¼è‡´çš„é‡å¤è®¡æ•°ï¼‰
  (SELECT COUNT(DISTINCT rpc_inner.county_id) 
   FROM rel_policy_county rpc_inner 
   WHERE rpc_inner.policy_id = p.policy_id
  ) as county_count,
  -- å­æŸ¥è¯¢2: èµ„æºæŠ•å…¥æ•°
  (SELECT COUNT(DISTINCT pr_inner.resource_id) 
   FROM policy_resources pr_inner 
   WHERE pr_inner.policy_id = p.policy_id
  ) as resource_count,
  -- å­æŸ¥è¯¢3: å…³è”è®¿è°ˆæ•°ï¼ˆä»ç¼“å­˜è¡¨è¯»å–ï¼Œæ€§èƒ½ä¼˜åŒ–ï¼‰
  (SELECT COUNT(DISTINCT pic.data_id)
   FROM policy_interview_cache pic
   WHERE pic.policy_id = p.policy_id
  ) as interview_count,
  -- å­æŸ¥è¯¢4: å¹³å‡å…³è”å¼ºåº¦
  (SELECT AVG(rpc_strength.strength) 
   FROM rel_policy_county rpc_strength 
   WHERE rpc_strength.policy_id = p.policy_id
  ) as avg_strength,
  -- å­æŸ¥è¯¢5: æœ€æ—©å’Œæœ€æ™šé‡‡çº³å¹´ä»½
  (SELECT MIN(rpc_adopt.adopt_year) 
   FROM rel_policy_county rpc_adopt 
   WHERE rpc_adopt.policy_id = p.policy_id
  ) as first_adopt_year,
  (SELECT MAX(rpc_adopt.adopt_year) 
   FROM rel_policy_county rpc_adopt 
   WHERE rpc_adopt.policy_id = p.policy_id
  ) as last_adopt_year
FROM policies p;
```

**ä¸ºä»€ä¹ˆä½¿ç”¨å­æŸ¥è¯¢ï¼Ÿ**
- ä¼ ç»Ÿ `LEFT JOIN + GROUP BY` ä¼šäº§ç”Ÿç¬›å¡å°”ç§¯ï¼šæ”¿ç­– Ã— å¿ Ã— èµ„æº Ã— è®¿è°ˆ
- ç¤ºä¾‹ï¼š1ä¸ªæ”¿ç­– Ã— 3ä¸ªå¿ Ã— 2ä¸ªèµ„æº = 6è¡Œè®°å½• â†’ `COUNT(DISTINCT county_id)` ä»æ­£ç¡®ï¼Œä½†æ€§èƒ½å·®
- å­æŸ¥è¯¢æ–¹æ¡ˆï¼šæ¯ä¸ªç»´åº¦ç‹¬ç«‹ç»Ÿè®¡ï¼Œé¿å…å¤šè¡¨JOINè†¨èƒ€

##### E. ç´¢å¼•ä¼˜åŒ–

**æ–°å¢ç´¢å¼•**ï¼š
```sql
CREATE INDEX idx_status ON policies(status);
CREATE INDEX idx_relevance ON policy_interview_cache(relevance_score);
```

**å·²æœ‰ç´¢å¼•**ï¼ˆ`init.sql` ä¸­åˆ›å»ºï¼‰ï¼š
- `idx_policy_type`: åŠ é€Ÿæ”¿ç­–ç±»å‹ç­›é€‰
- `idx_issue_date`: åŠ é€Ÿæ—¶é—´èŒƒå›´æŸ¥è¯¢

#### æ‰‹åŠ¨æ‰§è¡Œè¿ç§»ï¼ˆå¯é€‰ï¼‰

```powershell
# æ–¹æ³•1: PowerShellç®¡é“ï¼ˆæ¨èï¼‰
Get-Content backend/database/migrations/add_policy_enhancements.sql | mysql -u root -p ci_pae

# æ–¹æ³•2: MySQL sourceå‘½ä»¤
mysql -u root -p ci_pae -e "source backend/database/migrations/add_policy_enhancements.sql"
```

#### éªŒè¯è¿ç§»ç»“æœ

```sql
-- æ£€æŸ¥æ–°å¢å­—æ®µ
DESC rel_policy_county;  -- åº”æ˜¾ç¤º strength, adopt_year, notes
DESC policy_resources;   -- åº”æ˜¾ç¤º amount, beneficiary_count, year

-- æ£€æŸ¥æ–°å¢è¡¨
SHOW TABLES LIKE 'policy%';  -- åº”æ˜¾ç¤º policy_keywords, policy_interview_cache

-- æ£€æŸ¥è§†å›¾
SHOW CREATE VIEW v_policy_stats;

-- æ£€æŸ¥æ•°æ®
SELECT COUNT(*) FROM policy_keywords;           -- åº”æœ‰9æ¡å…³é”®è¯
SELECT COUNT(*) FROM policy_interview_cache;    -- åº”æœ‰28æ¡ç¼“å­˜è®°å½•
SELECT * FROM v_policy_stats LIMIT 3;           -- åº”æ˜¾ç¤ºå®Œæ•´ç»Ÿè®¡æ•°æ®

-- æ£€æŸ¥ç›¸å…³åº¦è¯„åˆ†
SELECT policy_id, data_id, relevance_score, matched_keywords 
FROM policy_interview_cache 
WHERE relevance_score > 5.0 
ORDER BY relevance_score DESC 
LIMIT 5;
```

### 2. åˆå§‹åŒ–è„šæœ¬ä¸æ•°æ®æº
**æ–‡ä»¶**: `backend/database/init.sql` & `backend/config/initDb.js`
`initDb.js` å®Œæ•´æµç¨‹ï¼šè¡¨ç»“æ„ â†’ æ•°æ®å¯¼å…¥ â†’ è¿ç§»æ‰§è¡Œã€‚æ”¯æŒå¹‚ç­‰ä¸è·³è¿‡å·²å­˜åœ¨æ•°æ®ã€‚

---

## ğŸ”§ åç«¯æœåŠ¡å±‚

### 3. æ”¿ç­–æœåŠ¡æ¨¡å—
**æ–‡ä»¶**: `backend/services/policyService.js`

ä¸»è¦æ–¹æ³•ï¼š
- `getPolicyList(filters)`ï¼šä»è§†å›¾ `v_policy_stats` è¯»å–æ°”æ³¡æ•°æ®ï¼Œå¯æŒ‰ç±»å‹ã€åŸå¸‚ã€å¹´ä»½ã€å…³é”®è¯ç­›é€‰ã€‚
- `getPolicyDetail(policyId)`ï¼šå¤šè¡¨ç»„åˆï¼Œè¿”å›æ”¿ç­–æ ¸å¿ƒã€è¦†ç›–å¿ã€èµ„æºæŒ‡æ ‡ã€è®¿è°ˆåˆ—è¡¨ã€æŒ‡æ ‡å½±å“ï¼ˆé¢„ç•™ï¼‰ã€‚
- `getPolicyStats()`ï¼šèšåˆç»Ÿè®¡ï¼ˆç±»å‹ã€å¹´ä»½ã€åŸå¸‚ã€è¦†ç›–åº¦ï¼‰ã€‚
- `getInterviewFullContent(dataId)`ï¼šè¿”å›å•æ¡è®¿è°ˆå®Œæ•´ä¿¡æ¯ï¼ˆv1.1.0ï¼šä¸€è®¿è°ˆä¸€å—è®¿è€…ï¼Œå…¼å®¹æ—§å¤šå—è®¿è€…è¿”å›æ•°ç»„ï¼‰ã€‚
- `getCities()`ï¼šæå–æ‰€æœ‰åŸå¸‚åˆ—è¡¨ã€‚

è¿”å›ç»“æ„ç¤ºä¾‹ï¼š
```javascript
{
  policy: {},
  counties: [],
  resources: [],
  interviews: [],
  indicator_effects: []
}
```

### 4. å£è¿°å²æ•°æ®æœåŠ¡ï¼ˆInterview Serviceï¼‰

**æ ¸å¿ƒæ–¹æ³•**ï¼š
- `getInterviewFullContent(dataId)`ï¼šè¿”å›å•æ¡è®¿è°ˆå®Œæ•´ä¿¡æ¯
  - æŸ¥è¯¢è¡¨ï¼š`interview_data` + `interview_events` + `interviewees` + `researchers`
  - å…³è”é€»è¾‘ï¼š
    ```sql
    interview_data (data_id)
      â†’ interview_events (event_id) [è·å–è®¿è°ˆæ—¶é—´ã€åœ°ç‚¹ã€ä¸»é¢˜]
      â†’ rel_interviewee_event (event_id) [è¿æ¥å—è®¿è€…]
      â†’ interviewees (interviewee_id) [è·å–å—è®¿è€…ä¿¡æ¯]
      â†’ counties (county_id) [è·å–å¿åŸŸä¿¡æ¯]
      â†’ rel_data_researcher (data_id) [è¿æ¥è°ƒç ”è€…]
      â†’ researchers (researcher_id) [è·å–è°ƒç ”è€…ä¿¡æ¯]
    ```
  - è¿”å›å­—æ®µï¼š`data_id`, `interviewee_name`, `identity`, `unit`, `county_name`, `city`, `interview_date`, `researcher_name`, `content`, `keywords`, `experience_summary`

**v1.1.0 æ›´æ–°**ï¼š
- âœ… å»é™¤å—è®¿è€… `GROUP_CONCAT` èšåˆï¼Œæ”¹ä¸ºä¸€è®¿è°ˆä¸€å—è®¿è€…æ¨¡å¼
- âœ… æ§åˆ¶å™¨å±‚å°†æ•°æ®åº“å­—æ®µ `event_date` æ˜ å°„ä¸ºå‰ç«¯æœŸæœ›çš„ `interview_date`
- âœ… å…¼å®¹æ€§å¤„ç†ï¼šè‹¥æ—§æ•°æ®è¿”å›å¤šå—è®¿è€…æ•°ç»„ï¼Œå‰ç«¯è‡ªåŠ¨å–ç¬¬ä¸€æ¡

**åº”ç”¨åœºæ™¯**ï¼š
1. **æ”¿ç­–è¯¦æƒ…æŠ½å±‰** â†’ "ç›¸å…³è®¿è°ˆ"æ ‡ç­¾é¡µ
   - ä» `policy_interview_cache` è¯»å–å…³è”è®¿è°ˆåˆ—è¡¨ï¼ˆå¸¦ç›¸å…³åº¦è¯„åˆ†ï¼‰
   - ç‚¹å‡»å•æ¡è®¿è°ˆå¡ç‰‡æ—¶è°ƒç”¨æ­¤æ¥å£è·å–å®Œæ•´å†…å®¹
2. **è®¿è°ˆå†…å®¹å¼¹çª—** â†’ å±•ç¤ºå®Œæ•´å£è¿°è®°å½•
   - æ˜¾ç¤ºå—è®¿è€…èº«ä»½ã€æ‰€å±å¿åŸŸ
   - æ˜¾ç¤ºè°ƒç ”è€…å’Œè®¿è°ˆæ—¶é—´
   - é«˜äº®åŒ¹é…çš„æ”¿ç­–å…³é”®è¯ï¼ˆ`matched_keywords`ï¼‰

### 5. æ”¿ç­–æ§åˆ¶å™¨ä¸è·¯ç”±
**æ–‡ä»¶**: `backend/controllers/policyController.js`, `backend/routes/*`

ç«¯ç‚¹ï¼š
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/policies` | åˆ—è¡¨ç­›é€‰ |
| GET | `/api/policies/stats` | ç»Ÿè®¡æ•°æ® |
| GET | `/api/policies/cities` | åŸå¸‚åˆ—è¡¨ |
| GET | `/api/policies/:id` | æ”¿ç­–è¯¦æƒ… |
| GET | `/api/policies/interviews/:dataId` | è®¿è°ˆå†…å®¹ï¼ˆevent_dateâ†’interview_dateï¼‰ |

é”™è¯¯ç»Ÿä¸€å°è£…ï¼š
```javascript
res.json({ ok: true, data }); // æˆåŠŸ
res.status(500).json({ ok: false, error: err.message }); // å¤±è´¥
```

---

## ğŸ¨ å‰ç«¯å®ç°

### 6. API å®¢æˆ·ç«¯
**æ–‡ä»¶**: `frontend/src/api/policy.js`
æ–¹æ³•ï¼š`getPolicies` / `getPolicyDetail` / `getPolicyStats` / `getInterviewFullContent` / `getCities`

è°ƒç”¨ç¤ºä¾‹ï¼š
```javascript
const res = await getPolicies({ type: 'agriculture', city: 'å‘¼å’Œæµ©ç‰¹å¸‚', page: 1, pageSize: 50 });
if (res.ok) console.log(res.data.policies);
```

### 7. åŠ›å¯¼å‘æ°”æ³¡ç»„ä»¶
**æ–‡ä»¶**: `frontend/src/components/PolicyBubbles.vue`
ç‰¹æ€§ï¼šå¹³æ–¹æ ¹åŠå¾„æ˜ å°„ã€ç±»å‹é¢œè‰²ã€è¾‰å…‰ + è„‰å†²åŠ¨ç”»ã€ç¢°æ’åŠ› & å±…ä¸­åŠ›ã€æ‹–æ‹½äº¤äº’ã€tooltipã€‚

### 8. æ”¿ç­–è¯¦æƒ…æŠ½å±‰
**æ–‡ä»¶**: `frontend/src/components/PolicyDetailDrawer.vue`
æ ‡ç­¾é¡µï¼šæ¦‚è§ˆ / è¦†ç›–å¿ / èµ„æºæŒ‡æ ‡ / ç›¸å…³è®¿è°ˆ / æŒ‡æ ‡å½±å“ã€‚ç›‘å¬ `policyId` è‡ªåŠ¨åŠ è½½ã€‚

### 9. è®¿è°ˆå¡ç‰‡ç»„ä»¶ï¼ˆæ›´æ–°ï¼‰
**æ–‡ä»¶**: `frontend/src/components/InterviewCard.vue`
æ›´æ–°å†…å®¹ï¼šç§»é™¤ç›¸å…³åº¦å±•ç¤ºï¼›å…³é”®è¯ä¼˜å…ˆä½¿ç”¨ `matched_keywords`ï¼›æ—¥æœŸå­—æ®µç»Ÿä¸€ä½¿ç”¨ `interview_date`ï¼›å•å—è®¿è€…æ¨¡å¼ã€‚

### 10. æŒ‡æ ‡å½±å“å›¾è¡¨
**æ–‡ä»¶**: `frontend/src/components/IndicatorEffectChart.vue`
æŸ± + æŠ˜çº¿ç»„åˆï¼Œå˜åŒ–ç‡æ ‡æ³¨ï¼Œå“åº”å¼ resizeã€‚å½“å‰å¯èƒ½æ— çœŸå®æ•°æ®ï¼ˆå ä½ï¼‰ã€‚

### 11. ç»éªŒæ¨¡å¼åº“é¡µé¢
**æ–‡ä»¶**: `frontend/src/views/Patterns.vue`
åŒ…å«ç­›é€‰å·¥å…·æ  + ç»Ÿè®¡å¡ç‰‡ + æ°”æ³¡å›¾ + è¯¦æƒ…æŠ½å±‰ï¼›ç›‘å¬ç­›é€‰æ¡ä»¶åŠ¨æ€åˆ·æ–°ã€‚

---

## ğŸ“ è®¿è°ˆæ¥å£ï¼ˆå•å—è®¿è€…æ¨¡å¼ï¼‰
### GET `/api/policies/interviews/:dataId`
å¯¹è±¡å½¢å¼ï¼š
```json
{
  "ok": true,
  "data": {
    "data_id": "DAT001",
    "interviewee_name": "å¼ ä¸‰",
    "identity": "æ‘å¹²éƒ¨",
    "unit": "æ‘å§”ä¼š",
    "county_name": "æ–°åŸåŒº",
    "city": "å‘¼å’Œæµ©ç‰¹å¸‚",
    "interview_date": "2018-06-15",
    "researcher_name": "æå››",
    "content": "å®Œæ•´è®¿è°ˆå†…å®¹...",
    "keywords": "æ‰¶è´«,äº§ä¸š,æ”¶å…¥"
  }
}
```
å…¼å®¹æ—§æ•°ç»„ï¼š
```json
{
  "ok": true,
  "data": [ { "data_id": "DAT001", "interviewee_name": "å¼ ä¸‰" } ]
}
```
å‰ç«¯å·²åšï¼šè‹¥ `data` æ•°ç»„ â†’ å–é¦–å…ƒç´ ã€‚

---

## ğŸš€ åˆå§‹åŒ–ä¸è¿è¡Œ

### æ­¥éª¤ 1ï¼šå¯é€‰é‡å»ºæ•°æ®åº“
```powershell
# å®Œå…¨é‡å»ºï¼ˆåˆ é™¤æ‰€æœ‰æ•°æ®ï¼‰
mysql -u root -plcx666666 -e "DROP DATABASE IF EXISTS ci_pae;"
```

### æ­¥éª¤ 2ï¼šå¯åŠ¨åç«¯ï¼ˆè§¦å‘è‡ªåŠ¨è¿ç§»ï¼‰
```powershell
cd backend
npm run dev
```
**è‡ªåŠ¨æ‰§è¡Œæµç¨‹**ï¼š
1. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»º
2. æ‰§è¡Œ `init.sql`ï¼šåˆ›å»ºæ‰€æœ‰åŸºç¡€è¡¨ç»“æ„
3. å¯¼å…¥ `data_all/real` å’Œ `data_all/fake` æ•°æ®
4. è‡ªåŠ¨æ‰§è¡Œ `migrations/` ç›®å½•ä¸‹çš„æ‰€æœ‰ `.sql` æ–‡ä»¶
5. è¿ç§»è„šæœ¬æ˜¯å¹‚ç­‰çš„ï¼šé‡å¤æ‰§è¡Œä¸ä¼šæŠ¥é”™

**éªŒè¯è¿ç§»æˆåŠŸ**ï¼š
- ç»ˆç«¯æ˜¾ç¤ºï¼š`âœ“ æ”¿ç­–å¯è§†åŒ–æ•°æ®åº“å¢å¼ºå®Œæˆï¼`
- ç»Ÿè®¡è§†å›¾è®°å½•æ•°ï¼š11æ¡
- å…³è”ç¼“å­˜è®°å½•æ•°ï¼š28æ¡

### æ­¥éª¤ 3ï¼šå¯åŠ¨å‰ç«¯
```powershell
cd frontend
npm install  # é¦–æ¬¡è¿è¡Œéœ€è¦å®‰è£…ä¾èµ–
npm run dev
```
**è®¿é—®åœ°å€**ï¼š`http://localhost:5174`

### æ­¥éª¤ 4ï¼šåŠŸèƒ½éªŒè¯æ¸…å•

#### 4.1 æ°”æ³¡å¯è§†åŒ–éªŒè¯
- [ ] æ‰“å¼€ `http://localhost:5174/patterns`
- [ ] ç»Ÿè®¡å¡ç‰‡æ˜¾ç¤ºæ•°æ®ï¼ˆæ”¿ç­–æ€»æ•°ã€è¦†ç›–å¿æ•°ã€å¹³å‡è¦†ç›–åº¦ã€è®¿è°ˆè®°å½•ï¼‰
- [ ] æ°”æ³¡å›¾æ¸²æŸ“ï¼Œå¤§å°åæ˜ è¦†ç›–å¿æ•°
- [ ] æœ‰è®¿è°ˆçš„æ°”æ³¡æ˜¾ç¤ºè¾‰å…‰æ•ˆæœ
- [ ] æ‚¬æµ®æ˜¾ç¤ºtooltipï¼ˆæ”¿ç­–åç§°ã€ç±»å‹ã€è¦†ç›–å¿æ•°ã€è®¿è°ˆæ•°ï¼‰

#### 4.2 ç­›é€‰åŠŸèƒ½éªŒè¯
- [ ] æ”¿ç­–ç±»å‹ä¸‹æ‹‰æ˜¾ç¤ºç±»å‹+æ•°é‡
- [ ] åŸå¸‚ä¸‹æ‹‰æ˜¾ç¤ºæ‰€æœ‰åŸå¸‚
- [ ] å‘å¸ƒå¹´ä»½ä¸‹æ‹‰æ˜¾ç¤ºå¹´ä»½+æ•°é‡
- [ ] å…³é”®è¯æœç´¢å®æ—¶æŸ¥è¯¢
- [ ] é‡ç½®æŒ‰é’®æ¸…ç©ºæ‰€æœ‰ç­›é€‰æ¡ä»¶

#### 4.3 è¯¦æƒ…æŠ½å±‰éªŒè¯
- [ ] ç‚¹å‡»æ°”æ³¡è§¦å‘ç ´ç¢ç²’å­åŠ¨ç”»
- [ ] ä¸­å¤®å¼¹å‡ºè¯¦æƒ…æ¨¡æ€æ¡†ï¼ˆ1200pxå®½ï¼‰
- [ ] **Tab 1 - æ¦‚è§ˆ**ï¼šæ˜¾ç¤ºæ”¿ç­–åŸºæœ¬ä¿¡æ¯
- [ ] **Tab 2 - è¦†ç›–å¿**ï¼šæ˜¾ç¤ºå¿åˆ—è¡¨ï¼Œå«å¼ºåº¦æ ‡ç­¾å’Œé‡‡çº³å¹´ä»½
- [ ] **Tab 3 - èµ„æºæŠ•å…¥**ï¼šæ˜¾ç¤ºèµ„é‡‘é‡‘é¢ã€å—ç›Šäººæ•°ã€æŠ•å…¥å¹´ä»½
- [ ] **Tab 4 - ç›¸å…³è®¿è°ˆ**ï¼šæŒ‰ç›¸å…³åº¦æ’åºï¼Œæ˜¾ç¤ºåŒ¹é…å…³é”®è¯
- [ ] **Tab 5 - æŒ‡æ ‡å½±å“**ï¼šæ˜¾ç¤º6ä¸ªç‹¬ç«‹å›¾è¡¨ï¼Œæ¯ä¸ªæŒ‡æ ‡å‰åå¯¹æ¯”

#### 4.4 è®¿è°ˆè¯¦æƒ…éªŒè¯
- [ ] ç‚¹å‡»"æŸ¥çœ‹å®Œæ•´å†…å®¹"æ‰“å¼€è®¿è°ˆå¼¹çª—
- [ ] æ˜¾ç¤ºå—è®¿è€…å§“åã€èº«ä»½ã€å•ä½ã€å¿å
- [ ] æ˜¾ç¤ºè®¿è°ˆæ—¥æœŸï¼ˆæ ¼å¼æ­£ç¡®ï¼‰
- [ ] æ˜¾ç¤ºè°ƒç ”å‘˜å§“å
- [ ] æ˜¾ç¤ºå®Œæ•´è®¿è°ˆå†…å®¹å’Œå…³é”®è¯

#### 4.5 æŒ‡æ ‡å›¾è¡¨éªŒè¯
- [ ] æ¯ä¸ªæŒ‡æ ‡æœ‰ç‹¬ç«‹å›¾è¡¨ï¼ˆé¿å…æ•°é‡çº§æ··åˆï¼‰
- [ ] æ˜¾ç¤ºæŒ‡æ ‡å›¾æ ‡ï¼ˆğŸ“Š GDPã€ğŸŒ¾ ç²®é£Ÿã€ğŸ›£ï¸ å…¬è·¯ç­‰ï¼‰
- [ ] æ˜¾ç¤ºå˜åŒ–ç™¾åˆ†æ¯”æ ‡ç­¾ï¼ˆçº¢è‰²â†“æˆ–ç»¿è‰²â†‘ï¼‰
- [ ] æŸ±çŠ¶å›¾æ˜¾ç¤ºå‰æœŸ/åæœŸå¯¹æ¯”
- [ ] æ‚¬æµ®æ˜¾ç¤ºå…·ä½“æ•°å€¼å’Œå˜åŒ–å¹…åº¦

#### 4.6 æ§åˆ¶å°æ£€æŸ¥
- [ ] æ—  500 é”™è¯¯
- [ ] æ—  undefined å­—æ®µè­¦å‘Š
- [ ] Network é¢æ¿æ‰€æœ‰ API è¿”å› `{ok: true}`

---
