# 数据库说明

## 项目概述

本项目基于 **832 工程系统**，用于管理和分析全国 832 个原国家级贫困县的脱贫攻坚数据。数据库名称为 `ci_pae`。

## 数据库结构

### 核心实体表

1. **县** - 832个原国家级贫困县基本信息
   - CountyID（主键）、县名、行政区划、所属省市
   - 脱贫状态、脱贫年份

### 经济与社会发展指标表（7类）

2. **核心经济指标表** - GDP、财政收入支出、居民收入等
3. **人口与户籍表** - 土地面积、户籍人口、户数等
4. **农业指标表** - 耕地面积、粮食产量、高标准农田等
5. **工业投资贸易表** - 工业企业数、固定资产投资、出口额等
6. **基础设施表** - 公路里程、通信用户数等
7. **教育科技文旅表** - 学校数、专利、体育场馆等
8. **医疗卫生社保表** - 床位数、医护人员、社保参保人数等

### 政策相关表

9. **政策** - 国家/省/市级脱贫攻坚政策
10. **政策投入资源** - 政策投入的资源/指标及影响信息

### 访谈调研相关表

11. **受访者** - 扶贫干部、脱贫户等受访者信息
12. **访谈事件** - 访谈活动记录
13. **访谈数据** - 访谈内容、关键词、经验总结
14. **调研者** - 调研团队成员信息

### 关联表

15. **受访者_访谈事件** - 多对多关系
16. **访谈数据_调研者** - 多对多关系

## 初始化数据库

### 一键初始化（推荐）

```bash
mysql -u root -p < database/init.sql
```

此脚本包含：
- 数据库创建
- 所有表结构定义
- 测试数据（3个县、多年度数据）
- 政策和访谈样本数据

### PowerShell 环境

```powershell
Get-Content database\init.sql | mysql -u root -p
```

## 测试数据说明

初始化脚本包含以下测试数据：

- **3个县样本**：阜平县（河北）、兰考县（河南）、察右前旗（内蒙古）
- **时间跨度**：2015-2020年
- **3条政策记录**：国家级、省级、县级政策示例
- **访谈数据**：2个访谈事件、3个受访者、2个调研者

## 数据备份与恢复

### 备份整个数据库

```bash
mysqldump -u root -p ci_pae > backup_$(date +%Y%m%d).sql
```

### 恢复数据库

```bash
mysql -u root -p ci_pae < backup.sql
```

### 仅备份结构（不含数据）

```bash
mysqldump -u root -p --no-data ci_pae > schema_only.sql
```

## 连接配置

数据库连接配置位于 `config/index.js`，通过环境变量 `.env` 配置：

```env
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=ci_pae
```

## 注意事项

- ✅ **已提交到 Git**：`init.sql` 文件（表结构+测试数据）
- ❌ **不要提交**：`.env` 文件、生产环境真实数据、数据库备份文件
- 🔒 生产环境务必修改默认密码和敏感信息
- 📊 定期备份生产数据库
- 🌐 SQL 脚本使用 UTF-8 编码
